<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
    <title>Tank's</title>
</head>
<body>
    <canvas id="canvas" width="720" height="640"></canvas>
    <script src="./js/tank.js"></script>
    <script>
    let t34 = new Tank(2,2);
    let walls = [];

    let swamps = [];
    function SquareBlocks(blocksArr,x,y,width,height, hp){
        for(let i=0; i<height; i++){
            for(let a=0; a<width; a++){
                blocksArr.push(new Block(x+a,y+i,hp))
            }
        }
    }
    walls.push(new Block(1,5,5));
    walls.push(new Block(3,6,5));
    walls.push(new Block(5,7,5));
    walls.push(new Block(1,6,5));
    walls.push(new Block(7,6,5));
    walls.push(new Block(9,7,5));
    walls.push(new Block(11,6,5));
    walls.push(new Block(13,7,5));
    walls.push(new Block(13,9,5));
    walls.push(new Block(11,10,5));
    walls.push(new Block(7,10,5));
    walls.push(new Block(3,10,5));
    walls.push(new Block(3,13,5));
    walls.push(new Block(6,13,5));
    walls.push(new Block(6,14,5));
    // walls.push(new Block(9,9,5));
    // walls.push(new Block(5,9,5));
    SquareBlocks(walls,3,10,9,1,5);
    SquareBlocks(walls,1,8,13,1,5);
    SquareBlocks(walls,3,5,12,1,5);
    SquareBlocks(walls,11,12,1,3,10);
    SquareBlocks(walls,11,11,4,1,10);
    SquareBlocks(walls,2,12,1,3,5);
    SquareBlocks(walls,4,12,1,3,5);
    SquareBlocks(walls,15,2,1,14,20);
    SquareBlocks(walls,1,15,14,1,20);
    // SquareBlocks(walls,8,7,1,3,5);
    
    SquareBlocks(swamps,1,10,10,5)
    // let swamps = [
    //     [],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]
    // ]

    let getLvL1Block = new Block(6,12);
    let getLvL2Block = new Block(13,13);
    let getArmoryBlock = new Block(1,10);
    let getFuelBlock = new Block(2,10)

    let drawGetBlocks = function(){
        getLvL1Block.drawSquare('white');
        getLvL2Block.drawSquare('black');
        getArmoryBlock.drawSquare('blue');
        getFuelBlock.drawSquare('yellow');
    }

    function drawBlocks(blocks,color){
        for(let i=0; i<blocks.length; i++){
            blocks[i].drawSquare(color);
        }
    }

    let intervalId = setInterval(function () {
        ctx.clearRect(0, 0, width, height);
        drawBlocks(swamps,'#fbaac3');
        drawBlocks(walls,'red');
        drawGetBlocks();
        drawScore();
        drawBorder();
        t34.gunDirection(t34.direction);
        for(let i=0; i<bullets.length; i++){
            bullets[i].moveBullet();
        }
    }, 100);
    </script>
</body>
</html>